<!-- eslint-disable vue/no-parsing-error -->
<template>
    <img :src="bg17" alt="slide">

    <svg width="1920" height="1080" viewBox="0 0 1920 1080" fill="none" xmlns="http://www.w3.org/2000/svg">
<g id="&#208;&#161;&#209;&#134;&#208;&#181;&#208;&#189;&#208;&#176; 107">
<g id="further-btn">
<rect x="618" y="921" width="685" height="69" rx="20" fill="white"/>
<text id="&#208;&#159;&#209;&#128;&#208;&#190;&#208;&#180;&#208;&#190;&#208;&#187;&#208;&#182;&#208;&#184;&#209;&#130;&#209;&#140;" fill="#010101" xml:space="preserve" style="white-space: pre" font-family="Gogh" font-size="22" font-weight="500" letter-spacing="0em"><tspan x="855.969" y="962.977">&#x41f;&#x440;&#x43e;&#x434;&#x43e;&#x43b;&#x436;&#x438;&#x442;&#x44c;</tspan></text>
<g id="Group 528">
<rect id="Rectangle 197" x="1015.97" y="954.5" width="42" height="2" fill="#010101"/>
<path id="Polygon 2" d="M1065.03 955.5L1050.78 962.428L1055.47 955.5L1050.78 948.572L1065.03 955.5Z" fill="#010101"/>
</g>
</g>
<g id="text-3">
<path id="Vector 17" d="M853 466V486L834.707 467.707L833 466H835.414H853Z" fill="white"/>
<g id="Frame 102">
<path d="M852 466H1617C1625.84 466 1633 473.163 1633 482V554C1633 562.837 1625.84 570 1617 570H868C859.163 570 852 562.837 852 554V466Z" fill="white"/>
<text id="&#208;&#159;&#209;&#128;&#208;&#184;&#208;&#178;&#208;&#181;&#209;&#130;, &#208;&#180;&#208;&#190;&#208;&#177;&#209;&#128;&#208;&#190; &#208;&#191;&#208;&#190;&#208;&#182;&#208;&#176;&#208;&#187;&#208;&#190;&#208;&#178;&#208;&#176;&#209;&#130;&#209;&#140; &#208;&#178; IT! &#208;&#161;&#208;&#181;&#208;&#185;&#209;&#135;&#208;&#176;&#209;&#129; &#209;&#143; &#209;&#128;&#208;&#176;&#209;&#129;&#209;&#129;&#208;&#186;&#208;&#176;&#208;&#182;&#209;&#131; &#209;&#130;&#208;&#181;&#208;&#177;&#208;&#181; &#208;&#186;&#208;&#176;&#208;&#186; &#209;&#131; &#208;&#189;&#208;&#176;&#209;&#129; &#208;&#178;&#209;&#129;&#209;&#145; &#209;&#131;&#209;&#129;&#209;&#130;&#209;&#128;&#208;&#190;&#208;&#181;&#208;&#189;&#208;&#190;, &#208;&#176; &#208;&#191;&#208;&#190;&#208;&#183;&#208;&#182;&#208;&#181; &#208;&#144;&#209;&#128;&#208;&#186;&#208;&#176;&#208;&#180;&#208;&#184;&#208;&#185; &#208;&#180;&#208;&#176;&#209;&#129;&#209;&#130; &#209;&#130;&#208;&#181;&#208;&#177;&#208;&#181; &#208;&#191;&#209;&#128;&#208;&#190;&#208;&#181;&#208;&#186;&#209;&#130; &#208;&#189;&#208;&#176; &#208;&#186;&#208;&#190;&#209;&#130;&#208;&#190;&#209;&#128;&#208;&#190;&#208;&#188; &#209;&#130;&#209;&#139; &#209;&#129;&#208;&#188;&#208;&#190;&#208;&#182;&#208;&#181;&#209;&#136;&#209;&#140; &#208;&#183;&#208;&#176;&#209;&#128;&#208;&#176;&#208;&#177;&#208;&#190;&#209;&#130;&#208;&#176;&#209;&#130;&#209;&#140; &#208;&#191;&#208;&#181;&#209;&#128;&#208;&#178;&#209;&#139;&#208;&#181; &#208;&#180;&#208;&#181;&#208;&#189;&#209;&#140;&#208;&#179;&#208;&#184;!" fill="black" xml:space="preserve" style="white-space: pre" font-family="Gogh" font-size="22" font-weight="500" letter-spacing="0em"><tspan x="897" y="517.977">&#x423; &#x442;&#x435;&#x431;&#x44f; &#x435;&#x441;&#x442;&#x44c; &#x434;&#x432;&#x430; &#x432;&#x430;&#x440;&#x438;&#x430;&#x43d;&#x442;&#x430;, &#x43d;&#x43e; &#x432;&#x44b;&#x431;&#x440;&#x430;&#x442;&#x44c; &#x43d;&#x443;&#x436;&#x43d;&#x43e; &#x442;&#x43e;&#x43b;&#x44c;&#x43a;&#x43e; &#x43e;&#x434;&#x438;&#x43d;.</tspan></text>
</g>
</g>
<g id="text-2">
<path id="Vector 17_2" d="M853 446H833L851.293 427.707L853 426V428.414V446Z" fill="white"/>
<g id="Frame 102_2">
<path d="M852 329C852 320.163 859.163 313 868 313H1617C1625.84 313 1633 320.163 1633 329V430C1633 438.837 1625.84 446 1617 446H852V329Z" fill="white"/>
<text id="&#208;&#159;&#209;&#128;&#208;&#184;&#208;&#178;&#208;&#181;&#209;&#130;, &#208;&#180;&#208;&#190;&#208;&#177;&#209;&#128;&#208;&#190; &#208;&#191;&#208;&#190;&#208;&#182;&#208;&#176;&#208;&#187;&#208;&#190;&#208;&#178;&#208;&#176;&#209;&#130;&#209;&#140; &#208;&#178; IT! &#208;&#161;&#208;&#181;&#208;&#185;&#209;&#135;&#208;&#176;&#209;&#129; &#209;&#143; &#209;&#128;&#208;&#176;&#209;&#129;&#209;&#129;&#208;&#186;&#208;&#176;&#208;&#182;&#209;&#131; &#209;&#130;&#208;&#181;&#208;&#177;&#208;&#181; &#208;&#186;&#208;&#176;&#208;&#186; &#209;&#131; &#208;&#189;&#208;&#176;&#209;&#129; &#208;&#178;&#209;&#129;&#209;&#145; &#209;&#131;&#209;&#129;&#209;&#130;&#209;&#128;&#208;&#190;&#208;&#181;&#208;&#189;&#208;&#190;, &#208;&#176; &#208;&#191;&#208;&#190;&#208;&#183;&#208;&#182;&#208;&#181; &#208;&#144;&#209;&#128;&#208;&#186;&#208;&#176;&#208;&#180;&#208;&#184;&#208;&#185; &#208;&#180;&#208;&#176;&#209;&#129;&#209;&#130; &#209;&#130;&#208;&#181;&#208;&#177;&#208;&#181; &#208;&#191;&#209;&#128;&#208;&#190;&#208;&#181;&#208;&#186;&#209;&#130; &#208;&#189;&#208;&#176; &#208;&#186;&#208;&#190;&#209;&#130;&#208;&#190;&#209;&#128;&#208;&#190;&#208;&#188; &#209;&#130;&#209;&#139; &#209;&#129;&#208;&#188;&#208;&#190;&#208;&#182;&#208;&#181;&#209;&#136;&#209;&#140; &#208;&#183;&#208;&#176;&#209;&#128;&#208;&#176;&#208;&#177;&#208;&#190;&#209;&#130;&#208;&#176;&#209;&#130;&#209;&#140; &#208;&#191;&#208;&#181;&#209;&#128;&#208;&#178;&#209;&#139;&#208;&#181; &#208;&#180;&#208;&#181;&#208;&#189;&#209;&#140;&#208;&#179;&#208;&#184;!_2" fill="black" xml:space="preserve" style="white-space: pre" font-family="Gogh" font-size="22" font-weight="500" letter-spacing="0em"><tspan x="897" y="364.977">&#x422;&#x44b; &#x437;&#x430;&#x440;&#x430;&#x431;&#x43e;&#x442;&#x430;&#x43b; &#x441;&#x432;&#x43e;&#x438; &#x43f;&#x435;&#x440;&#x432;&#x44b;&#x435; &#x434;&#x435;&#x43d;&#x44c;&#x433;&#x438;. &#x422;&#x435;&#x43f;&#x435;&#x440;&#x44c; &#x43f;&#x440;&#x438;&#x448;&#x43b;&#x43e; &#x432;&#x440;&#x435;&#x43c;&#x44f; </tspan><tspan x="897" y="393.977">&#x443;&#x437;&#x43d;&#x430;&#x442;&#x44c;, &#x43a;&#x430;&#x43a; &#x438;&#x445; &#x43f;&#x43e;&#x43b;&#x443;&#x447;&#x438;&#x442;&#x44c;!</tspan></text>
</g>
</g>
<g id="text-1">
<path id="Vector 17_3" d="M853 453H833L851.293 434.707L853 433V435.414V453Z" fill="white"/>
<g id="Frame 102_3">
<path d="M852 307C852 298.163 859.163 291 868 291H1617C1625.84 291 1633 298.163 1633 307V437C1633 445.837 1625.84 453 1617 453H852V307Z" fill="white"/>
<text id="&#208;&#159;&#209;&#128;&#208;&#184;&#208;&#178;&#208;&#181;&#209;&#130;, &#208;&#180;&#208;&#190;&#208;&#177;&#209;&#128;&#208;&#190; &#208;&#191;&#208;&#190;&#208;&#182;&#208;&#176;&#208;&#187;&#208;&#190;&#208;&#178;&#208;&#176;&#209;&#130;&#209;&#140; &#208;&#178; IT! &#208;&#161;&#208;&#181;&#208;&#185;&#209;&#135;&#208;&#176;&#209;&#129; &#209;&#143; &#209;&#128;&#208;&#176;&#209;&#129;&#209;&#129;&#208;&#186;&#208;&#176;&#208;&#182;&#209;&#131; &#209;&#130;&#208;&#181;&#208;&#177;&#208;&#181; &#208;&#186;&#208;&#176;&#208;&#186; &#209;&#131; &#208;&#189;&#208;&#176;&#209;&#129; &#208;&#178;&#209;&#129;&#209;&#145; &#209;&#131;&#209;&#129;&#209;&#130;&#209;&#128;&#208;&#190;&#208;&#181;&#208;&#189;&#208;&#190;, &#208;&#176; &#208;&#191;&#208;&#190;&#208;&#183;&#208;&#182;&#208;&#181; &#208;&#144;&#209;&#128;&#208;&#186;&#208;&#176;&#208;&#180;&#208;&#184;&#208;&#185; &#208;&#180;&#208;&#176;&#209;&#129;&#209;&#130; &#209;&#130;&#208;&#181;&#208;&#177;&#208;&#181; &#208;&#191;&#209;&#128;&#208;&#190;&#208;&#181;&#208;&#186;&#209;&#130; &#208;&#189;&#208;&#176; &#208;&#186;&#208;&#190;&#209;&#130;&#208;&#190;&#209;&#128;&#208;&#190;&#208;&#188; &#209;&#130;&#209;&#139; &#209;&#129;&#208;&#188;&#208;&#190;&#208;&#182;&#208;&#181;&#209;&#136;&#209;&#140; &#208;&#183;&#208;&#176;&#209;&#128;&#208;&#176;&#208;&#177;&#208;&#190;&#209;&#130;&#208;&#176;&#209;&#130;&#209;&#140; &#208;&#191;&#208;&#181;&#209;&#128;&#208;&#178;&#209;&#139;&#208;&#181; &#208;&#180;&#208;&#181;&#208;&#189;&#209;&#140;&#208;&#179;&#208;&#184;!_3" fill="black" xml:space="preserve" style="white-space: pre" font-family="Gogh" font-size="22" font-weight="500" letter-spacing="0em"><tspan x="897" y="342.977">{{userName}}, &#x442;&#x44b; &#x43e;&#x442;&#x43b;&#x438;&#x447;&#x43d;&#x43e; &#x441;&#x43f;&#x440;&#x430;&#x432;&#x438;&#x43b;&#x441;&#x44f; &#x441;&#x43e; &#x432;&#x441;&#x435;&#x43c;&#x438; &#x437;&#x430;&#x434;&#x430;&#x43d;&#x438;&#x44f;&#x43c;&#x438;! </tspan><tspan x="897" y="371.977">&#x421;&#xa0;&#x442;&#x430;&#x43a;&#x438;&#x43c; &#x440;&#x435;&#x437;&#x443;&#x43b;&#x44c;&#x442;&#x430;&#x442;&#x43e;&#x43c; &#x437;&#x430;&#x43a;&#x430;&#x43d;&#x447;&#x438;&#x432;&#x430;&#x44e;&#x442; &#x437;&#x430;&#x434;&#x430;&#x43d;&#x438;&#x44f; &#x442;&#x43e;&#x43b;&#x44c;&#x43a;&#x43e; 17% </tspan><tspan x="897" y="400.977">&#x441;&#x442;&#x430;&#x436;&#x435;&#x440;&#x43e;&#x432;</tspan></text>
</g>
</g>
</g>
    </svg>
</template>

<script setup>
import { nextTick, onMounted, ref, watch } from 'vue'
import { useUserStore } from '@/store/user'
import { storeToRefs } from 'pinia'
import bg17 from "@/assets/slides-images/seventeen/bg.webp"

// eslint-disable-next-line no-undef
const emit = defineEmits(['nextSlide', 'question'])

const user = useUserStore()
const { userName } = storeToRefs(user)
const replicStepAskWaiting = ref(false)

const nextStep = () => {
    replicStepAskWaiting.value = false
    replicStep.value += 1
}

let text1, text2, text3

const replicStep = ref(0)

watch(replicStep, (value) => {
    switch (value) {
        case 1:
            text1.classList.remove('visible')
            setTimeout(() => {
                text2.classList.add('visible')
            }, 500)
            break;

        case 2:
            text3.classList.add('visible')
            break;

        case 3:
            emit('nextSlide')

            break;

        default:
            break;
    }
    
})

onMounted(async () => {
    await nextTick()

    document.addEventListener('nextReplic', () => {
        if (replicStepAskWaiting.value === true) return 
        replicStep.value += 1
    })

    text1 = document.querySelector('#text-1')
    text2 = document.querySelector('#text-2')
    text3 = document.querySelector('#text-3')

    replicStepAskWaiting.value = true

    setTimeout(() => {
        text1.classList.add('visible')
    }, 500)

    setTimeout(() => {
        emit('question')
    }, 1500)

    
})

// eslint-disable-next-line no-undef
defineExpose({
    nextStep
})
</script>

<style lang="scss">

</style>